<app-admin-nav></app-admin-nav>

<div id="border" class="container">
  <div class="container">
    <h5 class="title text-center" style="padding-bottom: 15px">
      Search submissions of a patient over a time range
    </h5>
  </div>

  <div class="container" style="margin-top: 50px">
    <form [formGroup]="form">
      <div class="form-group row">
        <label class="col-form-label">Start:</label>
        <div class="col-sm-4 col-sm-push-3">
          <input
            class="form-control"
            type="date"
            id="from"
            formControlName="startAt"
            [ngClass]="{ 'is-invalid': submitted && startAt?.errors }"
            />
            <div *ngIf="submitted && startAt?.errors" class="invalid-feedback">
              <div *ngIf="startAt?.hasError('required')">
                Start date is required
              </div>
            </div>
        </div>

        <label for="example-date-input" class="col-form-label">End:</label>
        <div class="col-sm-4 col-sm-push-3">
          <input
            class="form-control"
            type="date"
            id="until"
            formControlName="endAt"
            [ngClass]="{ 'is-invalid': submitted && endAt?.errors }"
            />
            <div *ngIf="submitted && endAt?.errors" class="invalid-feedback">
              <div *ngIf="endAt?.hasError('required')">
                End date is required
              </div>
            </div>
        </div>

        <label for="example-date-input" class="col-form-label">Amka:</label>
        <div class="col-sm-4 col-sm-push-3">
          <input
            class="form-control"
            type="text"
            id="amka"
            formControlName="amka"
            [ngClass]="{ 'is-invalid': submitted && amka?.errors }"
            />
            <div *ngIf="submitted && amka?.errors" class="invalid-feedback">
              <div *ngIf="amka?.hasError('required')">
                Amka is required
              </div>
            </div>
        </div>
        <div class="col-sm-4">
          <button type="submit" class="btn btn-dark" (click)="Search()">
            Search
          </button>
          <a routerLink="/admin" type="button">Back</a>
        </div>
      </div>
    </form>
  </div>

  <table id="myTable" class="table table-hover table-responsive-md text-center">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Carb Intake</th>
        <th scope="col">Blood Glucose Level</th>
        <th scope="col">Date</th>
      </tr>
    </thead>
    <tbody *ngFor="let medi of mediData; let i = index">
      <tr>
        <th class="scope">{{ i + 1 }}</th>
        <td>{{ medi.carbIntake }}</td>
        <td>{{ medi.bloodGlucoseLevel }}</td>
        <td>{{ medi.measurementDate | date : "medium" }}</td>
      </tr>
    </tbody>
  </table>
</div>

<div id="border" class="container">
  <div class="container">
    <h5 class="title text-center" style="padding-bottom: 15px">
      Search submissions of a doctor over a time range
    </h5>
  </div>

  <div class="container" style="margin-top: 50px">
    <form [formGroup]="form2">
      <div class="form-group row">
        <label class="col-form-label">Start:</label>
        <div class="col-sm-4 col-sm-push-3">
          <input
            class="form-control"
            type="date"
            id="from1"
            formControlName="startAt"
            [ngClass]="{ 'is-invalid': submitted2 && startAt2?.errors }"
          />
          <div *ngIf="submitted2 && startAt2?.errors" class="invalid-feedback">
            <div *ngIf="startAt2?.hasError('required')">
              Start date is required
            </div>
          </div>
        </div>

        <label for="example-date-input" class="col-form-label">End:</label>
        <div class="col-sm-4 col-sm-push-3">
          <input
            class="form-control"
            type="date"
            id="until1"
            formControlName="endAt"
            [ngClass]="{ 'is-invalid': submitted2 && endAt2?.errors }"
          />
          <div
            *ngIf="submitted2 && endAt2?.errors"
            class="invalid-feedback"
          >
            <div *ngIf="endAt2?.hasError('required')">
              End date is required
            </div>
          </div>
        </div>

        <label for="example-date-input" class="col-form-label">Amka:</label>
        <div class="col-sm-4 col-sm-push-3">
          <input
            class="form-control"
            type="text"
            id="amka1"
            formControlName="amka"
            [ngClass]="{ 'is-invalid': submitted2 && amka2?.errors }"
          />
          <div *ngIf="submitted2 && amka2?.errors" class="invalid-feedback">
            <div *ngIf="amka2?.hasError('required')">AMKA is required</div>
          </div>
        </div>
        <div class="col-sm-3">
          <button type="submit" class="btn btn-dark" (click)="Search2()">
            Search
          </button>
          <a routerLink="/admin" type="button">Back</a>
        </div>
      </div>
    </form>
  </div>

  <table id="myTable" class="table table-hover table-responsive-md text-center">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Patient Fisrt Name</th>
        <th scope="col">Patient Last Name</th>
        <th scope="col">Consultation msg</th>
      <th scope="col">Date</th>
      </tr>
    </thead>
    <tbody *ngFor="let sub of subdoc; let i = index">
      <tr>
        <th class="scope">{{ i + 1 }}</th>
        <td>{{ sub.user?.first_name }}</td>
        <td>{{ sub.user?.last_name }}</td>
        <td >{{sub.consultationMsg}}</td>
      <td >{{sub.registerDate}}</td>
      </tr>
    </tbody>
  </table>
</div>
